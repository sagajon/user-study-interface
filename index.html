<!DOCTYPE html>
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
<head>
    <title>Evaluation form</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <h1 id="welcomeHeading">Welcome</h1>

    <div id="consentPage" class="page">
        <h2>Consent</h2>
        <p>
            In this task, you will be presented with computer-generated renders of snow on 3D models. We are interested in seeing how you rate the realism of these images. The task will take approximately <b>5-10 minutes</b>.
        </p>
        <br>
        <p>
            By clicking "Continue" below, you agree to take part in this study. Data from this study will be be kept confidential and only shown in aggregate form. This study is conducted in accordance with the ethical guidelines of KTH Royal Institute of Technology.
        </p>
        <br>
        <button id="continueButton" class="centerButton" disabled onclick="continueButtonPressed()">Continue</button>
    </div>

    <div id="knowledgePage" class="page">
        <h2>Background knowledge</h2>
        <p>
            The study regards the perceived realism of rendered snow on objects. In order to be able to do the task, you must be familiar with snow.
        </p>
        <br>
        <p>
            If you have never personally seen or interacted with snow, I'd recommend skipping doing this task.
        </p>
        <br>
        <div class="centerTable">
            <img class="reference" src="https://images.pexels.com/photos/45204/alm-friuli-snow-snowfall-45204.jpeg">
            <img class="reference" src="https://upload.wikimedia.org/wikipedia/commons/6/6d/Snow_on_fir_trees.jpg">
        </div>
        <br>
        <button id="knowledgeButton" class="centerButton" disabled onclick="knowledgeButtonPressed()">I attest that I am familiar with snow enough to do the task</button>
    </div>

    <div id="instructionPage" class="page">
        <h2>Instructions</h2>
        <p>
            You will be shown two 3D models side by side, both showing a model of an object which snow has gathered on.
        </p>
        <br>
        <p>
            Your task is to answer which of the two renders is more realistic to you. You answer by clicking on the button associated with the image. In this context, you are free to decide what realism means to you and answer accordingly.
        </p>
        <br>
        <p>
            You can complete this task on a phone or computer, but make sure you take your time and remain undisturbed. <span class="highlightedText"><b>Reloading the page will reset the trial.</b></span>
        </p>
        <br>
        <p>
            There will be a total of 48 pairs, each needing to be rated in terms of realism.
        </p>
        <br>
        <button id="startButton" class="centerButton" disabled onclick="startButtonPressed()">Start</button>
    </div>

    <div id="referencePage" class="page">
        <h2>3D models</h2>
        <p>
            You will be presented with two interactable 3D models at each trial. You can change the angle by clicking and dragging your mouse (computer), or your finger (touch screen).
        </p>
        <br>
        <p>Try familiarising yourself with this system now!</p>
        <div class="imageContainer">
            <div class="choiceContainer">
                <model-viewer class="model" src="models\Tree_S5P1.glb" shadow-intensity="1" camera-controls touch-action="pan-y" disable-zoom></model-viewer>
            </div>
            <div class="choiceContainer">
                <model-viewer class="model" src="models\Sphere_S10P3.glb" shadow-intensity="1" camera-controls touch-action="pan-y" disable-zoom></model-viewer>
            </div>
        </div>
        <button id="trialStartButton" class="centerButton" disabled onclick="trialStartButtonPressed()">Start task</button>
    </div>

    <div id="trialPage" class="page">
        <h2 id="trialNumber">Trial x</h2>
        <p>Of the two renders below, which one is more <span class="highlightedText">realistic</span> to you?</p>
        <div class="imageContainer">
            <div class="choiceContainer">
                <model-viewer class="model" id="leftImage" shadow-intensity="1" camera-controls touch-action="pan-y" src="" disable-zoom></model-viewer>
                <button class="realismButton" onclick="realismSubmit(this.innerHTML)">Option 1</button>
            </div>
            <div class="choiceContainer">
                <model-viewer class="model" id="rightImage" shadow-intensity="1" camera-controls touch-action="pan-y" src="" disable-zoom></model-viewer>
                <button class="realismButton" onclick="realismSubmit(this.innerHTML)">Option 2</button>
            </div>
        </div>
    </div>

    <div id="demographicsPage" class="page">
        <h2>Demographics</h2>
        <table>
            <tr>
                <td>
                    <p><span class="red">* marks a required question</span></p>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="gender">What is your gender?</label>
                    <select name="gender">
                        <option>Male</option>
                        <option>Female</option>
                        <option>Non-binary</option>
                        <option>Other</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="age">What is your age?</label>
                    <input name="age" type="number">
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="education">What is the highest level of education you have completed?</label>
                    <select name="education">
                        <option>Less than high school degree</option>
                        <option>High school degree or equivalent (e.g., GED)</option>
                        <option>Some college but no degree</option>
                        <option>Bachelor degree</option>
                        <option>Master degree</option>
                        <option>Professional degree</option>
                        <option>Doctoral degree</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="country">What is your country of residence?</label>
                    <input name="country" type="text">
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="experience">What is your experience with computer graphics?</label>
                    <select name="experience">
                        <option>I have never interacted with computer graphics</option>
                        <option>I have seen computer graphics on tv, in films, in video games or in other media</option>
                        <option>I have limited experience creating computer graphics (e.g. as a hobby or in a university course)</option>
                        <option>I have professional experience creating computer graphics</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="vision">How is your vision?</label>
                    <select name="vision">
                        <option>normal vision</option>
                        <option>corrected-to-normal vision (i.e. glasses, contact lenses)</option>
                        <option>other</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="comments">Do you have any comments or feedback on the task?</label>
                </td>
            </tr>
            <tr>
                <td>
                    <textarea name="comments" rows="10" cols="100"></textarea>
                </td>
            </tr>
        </table>
        
        <button id="completionButton" class="centerButton" onclick="verifyAndGatherData()">Finish</button>
    </div>

    <form id="dataForm" method="POST" action="https://script.google.com/macros/s/AKfycby-eXGgLAn_rRz4RA6yR88-CLYj6wYhdMkKG0qLQV4biVHYJCAw_As-DZD0-HUQp7_Hiw/exec">
        <input name="Data" type="hidden">
    </form>

    <script src="index.js"></script>
</body>